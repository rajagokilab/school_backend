{% extends 'school/base.html' %}
{% block content %}
<h2>Parent Dashboard</h2>

{% if message %}
  <p>{{ message }}</p>
{% else %}
  <h3>Children:</h3>
  <ul>
    {% for student in students %}
      <li>{{ student.user.get_full_name }} - Grade: {{ student.grade }}</li>
    {% endfor %}
  </ul>

  <h3>Marks:</h3>
  <table border="1" cellpadding="5" cellspacing="0">
    <tr>
      <th>Student</th>
      <th>Exam</th>
      <th>Subject</th>
      <th>Marks</th>
    </tr>
    {% for mark in marks %}
    <tr>
      <td>{{ mark.student.user.get_full_name }}</td>
      <td>{{ mark.exam.name|default:"N/A" }}</td>
      <td>{{ mark.subject.name }}</td>
      <td>{{ mark.marks }}</td>
    </tr>
    {% endfor %}
  </table>

  <h3>Attendance:</h3>
  <table border="1" cellpadding="5" cellspacing="0">
    <tr>
      <th>Student</th>
      <th>Course</th>
      <th>Date</th>
      <th>Status</th>
    </tr>
    {% for att in attendance %}
    <tr>
      <td>{{ att.student.user.get_full_name }}</td>
      <td>{{ att.course.name }}</td>
      <td>{{ att.date }}</td>
      <td>{{ att.status }}</td>
    </tr>
    {% endfor %}
  </table>
{% endif %}

{% endblock %}
